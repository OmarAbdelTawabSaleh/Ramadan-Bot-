<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>omarabdeltawabsaleh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&family=Fira+Code:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #050505; color: white; overflow-x: hidden; }
        .animated-gradient-border {
            height: 6px;
            background: linear-gradient(90deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000);
            background-size: 400% 100%;
            animation: moveGradient 8s linear infinite;
        }
        @keyframes moveGradient { 0% { background-position: 0% 0%; } 100% { background-position: 100% 0%; } }
        .glass-panel { background: rgba(20, 20, 20, 0.9); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .code-header { font-family: 'Fira Code', monospace; text-shadow: 0 0 20px #eab308; }
        .log-box { height: 180px; overflow-y: auto; background: rgba(0,0,0,0.4); border: 1px solid #333; padding: 10px; border-radius: 15px; font-size: 11px; }
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #eab308; border-radius: 10px; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-6 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-zinc-900 via-black to-black">

    <div class="code-header text-yellow-500 text-6xl font-bold mb-4 animate-pulse">&lt;/&gt;</div>

    <div class="text-center mb-8">
        <h1 class="text-3xl md:text-5xl font-black tracking-widest text-white mb-2 uppercase" style="font-family: 'Fira Code';">
            OMAR ABDEL-TAWAB SALEH
        </h1>
        <p class="text-2xl font-black text-yellow-500 italic">ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ±</p>
    </div>

    <div id="root" class="w-full max-w-md"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const SERVER_URL = "https://victor-late-expression-paragraph.trycloudflare.com";

        function App() {
            // 1. Ø¥Ø¶Ø§ÙØ© states Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù€ Logs
            const [phone, setPhone] = useState(localStorage.getItem('saved_num') || '');
            const [step, setStep] = useState(1);
            const [pairingCode, setPairingCode] = useState('');
            const [socket, setSocket] = useState(null);
            const [logs, setLogs] = useState([]);
            const logEndRef = useRef(null);

            useEffect(() => {
                const s = io(SERVER_URL);
                setSocket(s);

                // 2. Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­
                const savedNum = localStorage.getItem('saved_num');
                if(savedNum) {
                    setStep(2);
                    s.emit('check_session', savedNum);
                }

                s.on('pairing_code', (data) => {
                    setPairingCode(data.code);
                    setStep(3);
                });

                s.on('status', (status) => {
                    if(status === 'connected') {
                        localStorage.setItem('saved_num', phone);
                        setStep(4);
                    }
                    if(status === 'no_session') setStep(1);
                });

                // 3. Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­ÙŠØ© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
                s.on('log', (data) => {
                    setLogs(prev => [...prev, data]);
                });

                return () => s.disconnect();
            }, [phone]);

            // Ø³ÙƒØ±ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø¢Ø®Ø± Ø§Ù„Ø³Ø¬Ù„
            useEffect(() => {
                logEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [logs]);

            const handleStart = () => {
                if(!phone) return alert("Ø¯Ø®Ù„ Ø±Ù‚Ù…Ùƒ Ø§Ù„Ø£ÙˆÙ„ ÙŠØ§ Ø¨Ø·Ù„!");
                setStep(2);
                socket.emit('start_pairing', phone);
            };

            // 4. Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§ÙŠØ¯Ø© Ø§Ù„Ø°ÙƒÙŠØ©
            const startBroadcast = () => {
                setLogs([{ msg: 'ğŸš€ Ø¬Ø§Ø±ÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¹Ø§ÙŠØ¯Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©...', type: 'info' }]);
                socket.emit('send_broadcast', { sessionNum: phone });
            };

            return (
                <div class="relative w-full transition-all">
                    <div class="glass-panel rounded-[2.5rem] overflow-hidden shadow-[0_0_80px_rgba(0,0,0,0.8)] relative z-10">
                        <div class="animated-gradient-border w-full"></div>
                        
                        <div class="p-10 text-center">
                            <h3 class="text-3xl font-black mb-6 text-white leading-tight">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ… ğŸ™ˆğŸ˜</h3>

                            {step === 1 && (
                                <div class="space-y-6 animate-fadeIn">
                                    <input 
                                        type="tel" inputmode="numeric"
                                        value={phone} onChange={(e) => setPhone(e.target.value)}
                                        placeholder="Ù…Ø«Ø§Ù„: 201202763155"
                                        class="w-full bg-black/60 border-2 border-zinc-800 p-5 rounded-2xl text-center text-2xl font-black text-yellow-500 focus:border-yellow-500 outline-none transition-all"
                                    />
                                    <button onClick={handleStart} class="w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-black font-black text-xl py-5 rounded-2xl shadow-lg active:scale-95 transition-transform">
                                        Ø§Ø±Ø¨Ø· Ø§Ù„Ø¨ÙˆØª Ø§Ù„Ø¢Ù† ğŸ¤©
                                    </button>
                                </div>
                            )}

                            {step === 2 && (
                                <div class="py-10 animate-pulse">
                                    <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-yellow-500 mx-auto mb-6"></div>
                                    <p class="text-yellow-500 font-black text-xl italic">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±...</p>
                                </div>
                            )}

                            {step === 3 && (
                                <div class="space-y-6 animate-fadeIn">
                                    <p class="text-gray-300 font-bold text-sm text-center">Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ ÙˆØ§ØªØ³Ø§Ø¨:</p>
                                    <div class="bg-black/40 border border-zinc-700 p-6 rounded-2xl inline-block mx-auto shadow-inner">
                                        <div class="flex items-center justify-center gap-2 mb-4">
                                            {pairingCode.split('').map((char, i) => (
                                                <span key={i} class="bg-yellow-500 text-black text-2xl font-black w-8 h-12 flex items-center justify-center rounded-lg shadow-lg border border-white/20">
                                                    {char}
                                                </span>
                                            ))}
                                        </div>
                                        <button onClick={() => {navigator.clipboard.writeText(pairingCode); alert("ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…");}} class="w-full bg-zinc-800 text-yellow-500 py-2 rounded-xl text-xs font-bold border border-zinc-700">Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯</button>
                                    </div>
                                </div>
                            )}

                            {/* 5. Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø­Ø¯Ø«Ø©: Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙˆØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */}
                            {step === 4 && (
                                <div class="space-y-5 animate-fadeIn text-right">
                                    <div class="bg-green-500/20 text-green-400 p-4 rounded-xl border border-green-500/50 font-black text-center text-sm">
                                        âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­ (Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„)
                                    </div>

                                    <button 
                                        onClick={startBroadcast}
                                        class="w-full bg-yellow-500 text-black font-black py-4 rounded-2xl shadow-lg hover:bg-yellow-400 transition-all active:scale-95"
                                    >
                                        Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ø¹Ø§ÙŠØ¯Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ù‡Ø§Øª ğŸš€
                                    </button>

                                    <div>
                                        <p class="text-xs text-gray-500 mb-2 font-bold">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­ÙŠØ© (Logs):</p>
                                        <div class="log-box space-y-2 font-mono">
                                            {logs.length === 0 && <p class="text-zinc-700 italic">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø£ÙˆØ§Ù…Ø±...</p>}
                                            {logs.map((log, i) => (
                                                <div key={i} class={`flex justify-between border-b border-white/5 pb-1 ${log.type === 'error' ? 'text-red-400' : 'text-green-400'}`}>
                                                    <span>{log.msg}</span>
                                                    <span class="text-[9px] opacity-50">{new Date().toLocaleTimeString('ar-EG')}</span>
                                                </div>
                                            ))}
                                            <div ref={logEndRef} />
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        <div class="pb-6 text-center">
                            <p class="text-[12px] text-zinc-500 uppercase tracking-[0.3em] font-black">Official Release â€¢ Omar Saleh</p>
                        </div>
                    </div>

                    <div class="mt-12 flex justify-center items-center gap-10 animate-bounce">
                        <a href="#"><i class="fab fa-facebook text-5xl text-[#1877F2]"></i></a>
                        <a href="#"><i class="fab fa-telegram text-5xl text-[#24A1DE]"></i></a>
                        <a href="#"><i class="fab fa-whatsapp text-5xl text-[#25D366]"></i></a>
                    </div>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
